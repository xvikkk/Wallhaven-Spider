# wallpaper_pro

## 简介
wallpaper_pro是一个基于Scrapy框架开发的壁纸下载爬虫，主要用于从[Wallhaven](https://wallhaven.cc/)等网站上抓取和下载高清壁纸。该项目利用Scrapy强大的爬取和数据处理能力，结合图片管道功能，实现了高效的壁纸下载和管理。

>[!NOTE]
>Wallhaven是全球最大的壁纸分享平台，提供了海量的高清壁纸。wallhaven_pro爬虫可以帮助用户批量下载Wallhaven上的壁纸，方便用户收藏和使用。

## 环境和运行
```text
python版本：3.12.6
scrapy版本：2.13.4
pillow版本：12.0.0
```
1. 安装Scrapy框架和pillow：
   ```
   pip install scrapy pillow

   # 或者
   pip install -r requirements.txt
   ```
2. 运行：
   ```
   python start.py
   ```

>[!WARNING]
>对于某些网络环境，爬虫可能会由于访问限制而被网站拒绝。用户在使用时请遵守Wallhaven的使用条款和法律法规，避免侵犯他人的权益。

## 设计说明
使用XPath提取壁纸链接和图片信息，结合Scrapy的异步请求和数据处理能力实现壁纸下载。  
管理两个爬虫，分别对应不同的壁纸来源。  
使用start.py作为入口文件，通过命令行参数传递不同的参数，如数据源、榜单选择、登录账号密码等。  


## 功能特点
- **深度爬取**：首页的图片预览分别率较低，爬虫采取二级穿透策略，先从首页获取图片链接，再通过链接进入详情页下载高清壁纸。
- **图片管道**：原生的下载器使用SHA1哈希值命名文件，这导致文件名不可读，用户无法直接识别壁纸的内容。为了解决这个问题，项目自定义了图片管道，将图片保存为可读的文件名，方便用户管理和识别。
- **数据与格式兼容**：Wallhaven的图片混杂了不同的格式，项目在下载时会自动识别并保存为对应的格式。
- **动态参数**：项目支持通过命令行参数传递不同的参数，灵活满足用户不同的需求。
- **登录支持**：如果用户提供了Wallhaven的账号密码，项目会自动登录账号，获取更多的壁纸。
- **多数据源采集**：项目支持从多个壁纸分享平台采集壁纸，用户可以根据需要选择不同的平台。
- **用户模拟**：为了模拟真实的用户行为，项目在请求头中添加了浏览器的User-Agent，避免被网站识别为爬虫。